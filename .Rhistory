xlab = gpar(fontsize = 8, cex=0.8),
ticks =gpar(fontsize = 8, cex=0.8)))
library(forestplot)
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.1, 4),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(5, "mm"),
line.margin = unit(1, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 9, cex=1),
label = gpar(fontsize = 8, cex=1),
xlab = gpar(fontsize = 8, cex=0.8),
ticks =gpar(fontsize = 8, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 6),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(5, "mm"),
line.margin = unit(1, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 12, cex=1),
label = gpar(fontsize = 11, cex=1),
xlab = gpar(fontsize = 11, cex=0.8),
ticks =gpar(fontsize = 11, cex=0.8)))
source("U:/forschung/vignette_prep.R", echo=TRUE)
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 6),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(3, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 12, cex=1),
label = gpar(fontsize = 11, cex=1),
xlab = gpar(fontsize = 11, cex=0.8),
ticks =gpar(fontsize = 11, cex=0.8)))
library(forestplot)
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 6),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(3, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 12, cex=1),
label = gpar(fontsize = 11, cex=1),
xlab = gpar(fontsize = 11, cex=0.8),
ticks =gpar(fontsize = 11, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(3, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 12, cex=1),
label = gpar(fontsize = 11, cex=1),
xlab = gpar(fontsize = 11, cex=0.8),
ticks =gpar(fontsize = 11, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(2, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(3, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 12, cex=0.8),
ticks =gpar(fontsize = 12, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(4, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(2, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 12, cex=0.8),
ticks =gpar(fontsize = 12, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(3, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(2, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 12, cex=0.8),
ticks =gpar(fontsize = 12, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(3, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(2, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 13, cex=0.8),
ticks =gpar(fontsize = 13, cex=0.8)))
knee %>% mutate(Th = factor(Th, levels=c(1, 2), labels=c("placebo", "treatment")),
Sex = factor(Sex),
R1_bin = factor(if_else(R1 >= 4, "(rather) severe pain", "moderate pain or less")),
R4_bin = factor(if_else(R4 < R1, "improvement of pain", "no imporvement")),
Age_cat = ordered(case_when(Age < 25 ~ "<20",
Age >= 25 ~ ">=25"),
levels=c("<20", ">=25"))) ->
knee
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall = formula_overall,
formulas = list(
R1_bin = "R4_bin ~ R1_bin*Th",
Age_cat = "R4_bin ~ Th*Age_cat + R1",
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
R1_bin = "R4_bin ~ Th",
Age_cat = formula_overall,
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = "moderate pain or less") %>%
add_header(. , group1_lbl = c("Moderate pain", "or less in", "placebo group"),
group2_lbl = c("Moderate pain", "or less in", "treatment group")) ->
res
knee %>% mutate(Th = factor(Th, levels=c(1, 2), labels=c("placebo", "treatment")),
Sex = factor(Sex),
R1_bin = factor(if_else(R1 >= 4, "(rather) severe pain", "moderate pain or less")),
R4_bin = factor(if_else(R4 < R1, "improvement of pain", "no improvement")),
Age_cat = ordered(case_when(Age < 25 ~ "<20",
Age >= 25 ~ ">=25"),
levels=c("<20", ">=25"))) ->
knee
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall = formula_overall,
formulas = list(
R1_bin = "R4_bin ~ R1_bin*Th",
Age_cat = "R4_bin ~ Th*Age_cat + R1",
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
R1_bin = "R4_bin ~ Th",
Age_cat = formula_overall,
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = "improvement of pain") %>%
add_header(. , group1_lbl = c("Moderate pain", "or less in", "placebo group"),
group2_lbl = c("Moderate pain", "or less in", "treatment group")) ->
res
options(error = recover)
knee %>%
subgroup_table_binomial(data = .,
formula_overall = formula_overall,
formulas = list(
R1_bin = "R4_bin ~ R1_bin*Th",
Age_cat = "R4_bin ~ Th*Age_cat + R1",
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
R1_bin = "R4_bin ~ Th",
Age_cat = formula_overall,
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = "improvement of pain") %>%
add_header(. , group1_lbl = c("Moderate pain", "or less in", "placebo group"),
group2_lbl = c("Moderate pain", "or less in", "treatment group")) ->
res
mod_overall
contrasts
subgroup
group
outcome
data(knee)
knee %>% mutate(Th = factor(Th, levels=c(1, 2), labels=c("placebo", "treatment")),
Sex = factor(Sex),
R1_bin = factor(if_else(R1 >= 4, "(rather) severe pain", "moderate pain or less")),
R4_bin = factor(if_else(R4 < R1, "improvement of pain", "no improvement")),
Age_cat = ordered(case_when(Age < 25 ~ "<20",
Age >= 25 ~ ">=25"),
levels=c("<20", ">=25"))) ->
knee
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall = formula_overall,
formulas = list(
R1_bin = "R4_bin ~ R1_bin*Th",
Age_cat = "R4_bin ~ Th*Age_cat + R1",
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
R1_bin = "R4_bin ~ Th",
Age_cat = formula_overall,
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = "improvement of pain") %>%
add_header(. , group1_lbl = c("Moderate pain", "or less in", "placebo group"),
group2_lbl = c("Moderate pain", "or less in", "treatment group")) ->
res
library(forestplot)
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.7, 100),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(3, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(2, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 13, cex=0.8),
ticks =gpar(fontsize = 13, cex=0.8)))
res %>%
forestplot(labeltext = c(subgroup, group1, group2, OR, p),
align = c("l", "r", "r", "r", "c"),
is.summary = summary,
graph.pos = ncol(.) - 4,
hrzl_lines = TRUE,
clip = c(0.01, 2),
xlab = "Odds ratio (95% CI)",
graphwidth = unit(50, "mm"),
colgap = unit(3, "mm"),
lineheight = unit(10, "mm"),
line.margin = unit(2, "mm"),
xlog = TRUE,
col = fpColors(box = "royalblue",
line = "darkblue",
summary = "royalblue"),
ci.vertices = TRUE,
txt_gp = fpTxtGp(summary = gpar(fontsize = 14, cex=1),
label = gpar(fontsize = 14, cex=1),
xlab = gpar(fontsize = 13, cex=0.8),
ticks =gpar(fontsize = 13, cex=0.8)))
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
aov_mod
aov_mod[interact_Anova, "Pr(>Chisq)"]
source("U:/forschung/forestplotutil/R/subgroup_table.R", echo=TRUE)
devtools::install()
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
View(res)
View(res)
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
source("U:/forschung/forestplotutil/R/subgroup_table.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
devtools::install()
source("U:/forschung/vignette_prep.R", echo=TRUE)
library(catdata)
library(dplyr)
knee %>% mutate(Th = factor(Th),
Sex = factor(Sex),
R4_improved = factor(if_else(R4 < R1, 1, 0))) ->
knee
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall = ,
formulas = list(
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = 1) ->
res
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall = "R4_bin ~ Th + R1",
formulas = list(
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = 1) ->
res
formula_overall = "R4_bin ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall,
formulas = list(
Sex = "R4_bin ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_bin",
outcome_positive = 1) ->
res
library(catdata)
library(dplyr)
#'
knee %>% mutate(Th = factor(Th),
Sex = factor(Sex),
R4_improved = factor(if_else(R4 < R1, 1, 0))) ->
knee
formula_overall = "R4_improved ~ Th + R1"
knee %>%
subgroup_table_binomial(data = .,
formula_overall,
formulas = list(
Sex = "R4_improved ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_improved",
outcome_positive = 1) ->
res
add_header(. , group1_lbl = c("Improvement", "of pain in", "placebo group"),
group2_lbl = c("Improvement", "of pain in", "treatment group")) ->
res
options(error = NULL)
knee %>%
subgroup_table_binomial(data = .,
formula_overall,
formulas = list(
Sex = "R4_improved ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_improved",
outcome_positive = 1)  %>%
add_header(., group1_lbl = c("Improvement", "of pain in", "placebo group"),
group2_lbl = c("Improvement", "of pain in", "treatment group")) ->
res
knee %>%
subgroup_table_binomial(data = .,
formula_overall,
formulas = list(
Sex = "R4_improved ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_improved",
outcome_positive = 1)  %>%
add_header(., group1_lbl = c("Improvement in", "placebo group"),
group2_lbl = c("Improvement in", "treatment group")) ->
res
knee %>%
subgroup_table_binomial(data = .,
formula_overall,
formulas = list(
Sex = "R4_improved ~ Th*Sex + R1"
),
formulas_subgroups = list(
Sex = formula_overall
),
group = "Th",
outcome = "R4_improved",
outcome_positive = 1)  %>%
add_header(., group1_lbl = c("Improvement in", "placebo group"),
group2_lbl = c("Improvement in", "treatment group")) ->
res
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::install()
library(forestplotutil)
?subgroup_table_binomial
devtools::document()
devtools::document()
devtools::install()
?subgroup_table_binomial
devtools::document()
devtools::install()
?subgroup_table_binomial
?subgroup_table_binomial
devtools::install()
?subgroup_table_binomial
devtools::install()
?subgroup_table_binomial
library(forestplotutil)
?subgroup_table_binomial
